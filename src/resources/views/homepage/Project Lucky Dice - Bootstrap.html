<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <!-- Datatable-->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.11.3/css/dataTables.bootstrap4.min.css">
    <!-- Favicon-->
    <link rel="icon" type="image/x-icon" href="./image/dice-favicon.jpg"> 
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <!--Kit Font Awesome-->
    <script src="https://kit.fontawesome.com/e1df1c9386.js" crossorigin="anonymous"></script>
    <!-- Datatable -->
    <script src="https://cdn.datatables.net/1.11.3/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.11.3/js/dataTables.bootstrap4.min.js"></script>
    <title>Project Casino Dice</title>
</head>
<style>
    .background {
        background: url("image/bg.jpg") rgba(255, 255, 255, 0.85);
        background-blend-mode: overlay;
    }
    .loading-bar {
        display: none; /* by default hidden */
        position: fixed;
        z-index: 1000000; /* always on top */
        left: 0;
        top : 0;
        width: 100%;
        height: 100%; /* full screen */
        background-image: url("./image/loading.gif");
        background-position: 50% 50%; /* center */
        background-color: rgba(255,255,255,0.8) /* transpacy */;
        background-repeat: no-repeat;
    }

    body.loading { /* when body loading class */
        overflow: hidden; /* hide scrolling bar */
    }

    body.loading .loading-bar { /* body loading class , appear loading bar */
        display: block;
    }

    .welcome {
        background:url('image/cover.jpg') rgba(255,255,255,0.5);
        background-blend-mode: overlay;

        min-height:100px;
    }
</style>
<body onload="onPageLoading()">
<div class="background">
    <div class="container-fluid welcome"> 
    </div>
    <div class="container mt-3">
        <div class="row form-group">
            <div class="col-sm-12 text-center text-primary">
                <p class="h1">Welcome to Lucky Dice</p>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-5" id="user-info-input">
                <div class="row form-group">
                    <h4>Nhập thông tin của bạn</h4>
                </div>
                <div class="row form-group">
                    <div class="col-sm-4">
                        <label class="form-label" for="input-user-name">Username <span class="text-danger">(*)</span></label>
                    </div>
                    <div class="col-sm-8">
                        <div class="input-group">
                            <div class="input-group-text">@</div>
                            <input title="Username" data-checktype="required|min:6|max:15|username" data-property="userName" class="form-control" id="input-user-name" type="text" placeholder="Username ...">
                            <div class="form-message small valid-feedback">Username hợp lệ</div>
                            <div class="form-message small invalid-feedback"></div>
                        </div> 
                        <small class="form-message text-muted">
                            Username không được bỏ trống <br>
                            Xem quy tắc đặt username
                            <a href="#user-info-input" onclick="alert(gUsernameRule)">
                                tại đây
                            </a>
                        </small>
                    </div>
                </div>
                <div class="row form-group">
                    <div class="col-sm-4">
                        <label for="input-first-name">First Name <span class="text-danger">(*)</span></label>
                    </div>
                    <div class="col-sm-8">
                        <input title="Firstname" data-checktype="required|name" data-property="firstName" class="form-control" id="input-first-name" type="text" placeholder="First name ...">
                        <div class="form-message small valid-feedback">Firstname hợp lệ</div>
                        <div class="form-message small invalid-feedback"></div>
                        <small class="form-text text-muted">Firstname không được để trống</small>
                    </div>
                </div>
                <div class="row form-group">
                    <div class="col-sm-4">
                        <label for="input-last-name">Last Name <span class="text-danger">(*)</span></label>
                    </div>
                    <div class="col-sm-8">
                        <input title="Lastname" data-checktype="required|name" data-property="lastName" class="form-control" id="input-last-name" type="text" placeholder="Last name ...">
                        <div class="form-message small valid-feedback">Lastname hợp lệ</div>
                        <div class="form-message small invalid-feedback"></div>
                        <small class="form-text text-muted">Lastname không được để trống</small>
                    </div>
                </div>
                <div class="row form-group">
                    <div class="col-sm-12">
                        <button class="btn btn-success" id="button-casino-dice">Bắt đầu quay</button>
                    </div>
                </div>
                <div class="row form-group">
                    <div class="col-sm-3">
                        Luật chơi
                    </div>
                    <div class="col-sm-9">
                        <ul>
                            <li>Nếu kết quả &lt;= 3 : Bạn sẽ không nhận được gì cả</li>
                            <li>Nếu kết quả &gt;= 4 : : Bạn sẽ nhận được phần thưởng là một voucher</li>
                            <li>Giá trị Voucher sẽ là 10 x Số lần liên tiếp bạn quay có kết quả >= 4 (Ví dụ : Bạn quay 2 lần liên tiếp >= 4 thì lần 2 sẽ nhận được voucher có giá trị là 20%, lần 3 sẽ là 30%</li>
                            <li>Giá trị voucher tối đa nhận được là 50%</li>
                            <li>Ngoài ra bạn sẽ nhận được phần thưởng đặc biệt khi quay liên tiếp 3 lần có kết quả >= 4</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="col-sm-4 text-center">
                <div class="row form-group">
                    <div class="col-sm-12">

                    </div>
                </div>
                <div class="row form-group">
                    <div class="col-sm-12">
                        <img id="img-result-casino-dice" src="image/diceRound.gif" style="width:120px">
                    </div>
                </div>
                <div class="row form-group">
                    <div class="col-sm-12">
                        <p id="prize-result-casino-dice" class="overflow-auto text-break"></p>
                    </div>
                </div>
                <div class="row form-group">
                    <div class="col-sm-12">
                        <h4 class="text-danger">Voucher</h4>
                        <img id="voucher-prize-img" src="image/voucher.png" alt="Voucher" class="w-50">
                        <p id="voucher-prize-detail"></p>
                    </div>
                </div>
                <div class="row form-group">
                    <div class="col-sm-12">
                        <h4 class="text-danger">Bonus Prize</h4>
                        <img class="w-50 rounded mx-auto d-block" alt="Bonus Prize" src="image/no-present.jpg" id="bonus-prize-detail-img" style="display:block">
                        <p id="bonus-prize-detail-text">Hãy quay số để nhận phần thưởng</p>
                    </div>
                </div>

            </div>
            <div class="col-sm-3" id="dice-detail-history">
                <div class="row">
                    <div class="col-sm-12 text-center">
                        <h4>Tra cứu kết quả đã quay tại đây</h4>
                    </div>
                    <input type="text" class="form-control mb-3" placeholder="Điền Id result cần check vào đây">
                    <div class="col-sm-12 text-center mb-4">
                        <button class="btn btn-success">Tra cứu</button>
                    </div>
                    <div class="col-sm-12" id="dice-result-field" style="display:none;">
                        <p title="_id"></p>
                        <p title="dice">&#9673; Kết quả quay</p>
                        <p title="voucher">&#9673; Voucher</p>
                        <p title="prize">&#9673; Phần thưởng khác</p>
                    </div>
                </div>

            </div>
        </div>
        <div class="row form-group my-5">
            <div id="button-history-data" class="col-sm-12 text-center my-3">
                <p class="h2">Thống kê lịch sử quay theo userName</p> 
            </div>
            <input id="inp-history-data-username" type="text" class="form-control mb-3" placeholder="Điền userName cần check vào đây">
            <div id="button-history-data" class="col-sm-12 text-center mt-2">
                <button title="dices" class="btn btn-success">Dice History</button>
                <button title="vouchers"class="btn btn-info">Voucher History</button>
                <button title="prizes"class="btn btn-info">Prize History</button>
            </div>
        </div>
        <div class="row p-5">
            <div class="col-sm-12">
                <table id="table-history" class="table table-striped table-hover w-100">
                </table>
            </div>
        </div>
    </div>
    <div class="container-fluid bg-warning p-3">
        <div class="row text-center">
            <div class="col-sm-12 p-3">
                <h4 class="m-2">Footer</h4>
                <a href="#" class="btn btn-dark m-3"><i class="fa fa-arrow-up"></i>To the top</a>
                <div class="m-2">
                    <i class="fa fa-facebook-official w3-hover-opacity"></i>
                    <i class="fa fa-instagram w3-hover-opacity"></i>
                    <i class="fa fa-snapchat w3-hover-opacity"></i>
                    <i class="fa fa-pinterest-p w3-hover-opacity"></i>
                    <i class="fa fa-twitter w3-hover-opacity"></i>
                    <i class="fa fa-linkedin w3-hover-opacity"></i>
                </div>
            </div>
            <div class="col-sm-12">
                <p class="text-center text-primary"> <b>Copyright &copy; 2021-<script>document.write(new Date().getFullYear())</script> - Lucky Dice -  All Rights Reserved</b></p>
            </div>
        </div>
    </div>
</div>

<div class="loading-bar"></div>
<script>
    /*** REGION 1 - Global variables - Vùng khai báo biến, hằng số, tham số TOÀN CỤC */
        var gUsernameRule = `1. Không được có dấu cách,chỉ 1 từ dính liền duy nhất \r\n` + 
                            `2. Trong khoảng 6-15 ký tự và ký tự đầu không được là số\n`+
                            `3. Tất cả các ký tự phải viết thường\n`+
                            `4. Chỉ bao gồm chữ và số, không được chứa ký tự đặc biệt`
    /*** REGION 2 - Vùng gán / thực thi hàm xử lý sự kiện cho các elements */
    // gán sự kiện click cho nút button 
    $("#button-casino-dice").on("click",onBtnRollDiceResult)

    $("#button-history-data button").on("click",function(){
        onBtnShowData(this.title)
    })
    
    $("#dice-detail-history button").on("click",function(){
        onBtnHistoryDetail()
    })

    const gDATA_INPUT_REQUIRED_ELEMENT = $("#user-info-input [data-checktype]");
    const gDATA_INPUT_REQUIRED_CLOSURE = storeInputHTML (...gDATA_INPUT_REQUIRED_ELEMENT)
    gDATA_INPUT_REQUIRED_ELEMENT.each(function(index){
        $(this).on("change blur",function() {
            dynamicCheckDataForm (this,gDATA_INPUT_REQUIRED_CLOSURE)
        })
    })

    /*** REGION 3 - Event handlers - Vùng khai báo các hàm xử lý sự kiện */
    // hàm xử lý sự kiện khi load trang
    function onPageLoading() {
        document.body.className="loading";
        document.body.className="";
    }

    function onBtnRollDiceResult() {
        // Khai báo cục bộ
        var vUserInfo = {
            userName : "",
            firstName : "",
            lastName : ""
        };

        // B1 : Thu thập data
        getDataPlayerInput(vUserInfo);

        // B2 : Validate data 
        var vIsDataCheck = checkDataPlayer(vUserInfo);

        // B3 : Call API 
        vIsDataCheck ? callApiDice(vUserInfo) : "";
    }
    
    function onBtnShowData (paramTypeData) {
        
        // Khai báo cục bộ
        var userName = $("#inp-history-data-username").val()

        if (!userName) {
            alert("Chưa điền username")
        } else {
            getHistoryData(paramTypeData,userName)
        }

        async function getHistoryData(paramTypeData,paramUserName) {
            const vHISTORY_DATA = {
                dices : "dice-history",
                prizes : "prize-history",
                vouchers : "voucher-history"
            }
            let status = 404;

            document.body.className="loading"
            await fetch (`https://lucky-dice-app.herokuapp.com/${vHISTORY_DATA[paramTypeData]}?userName=${paramUserName}`)
                .then (res => {
                        status = res.status;
                        return res.json()
                      })
                .then (result => {
                    if (result[paramTypeData].length == 0 ) {
                        alert ("Không tồn tại data với User này")
                        return
                    }
                    exportDataToTable (paramTypeData,result[paramTypeData])
                })
                .catch (err => alert (err))

            document.body.className=""
        }
    }

    function onBtnHistoryDetail () {
        var idResult = $("#dice-detail-history input").val();
        if (!idResult) {
            alert ("Chưa điền Id result")
        } else {
            callApiDiceDetail (idResult)
        }
    }

    /*** REGION 4 - Common funtions - Vùng khai báo hàm dùng chung trong toàn bộ chương trình*/
    
    function getDataPlayerInput (paramUserInfo) {
        $("#user-info-input input").each(function(){
            paramUserInfo[this.dataset.property] = this.value;
        })
    }
   
    function checkDataPlayer (paramUserInfo) {
        try {
            let bInputError = "";

            gDATA_INPUT_REQUIRED_ELEMENT.each(function(index){

                // Invalid form bootstrap 4 , nested function , closure 
                // dynamicCheckDataForm (element,checktype,title)
                dynamicCheckDataForm (this,gDATA_INPUT_REQUIRED_CLOSURE)
            });

            // Check data lỗi
            bInputError = checkDataValid (gDATA_INPUT_REQUIRED_CLOSURE.getAllElement(),gDATA_INPUT_REQUIRED_CLOSURE)

            if (bInputError) {
                throw (bInputError);
            }
        }
        catch (err) {
           return false;
        }
        return true;
   }

    async function callApiDice (paramUserInfo) {    
        
        document.body.className="loading";
        await fetch("https://lucky-dice-app.herokuapp.com/roll/",{
            method : "POST",
            headers : {
                "Content-Type" : "application/json;charset=UTF-8"
            },
            body : JSON.stringify(paramUserInfo)
        }).then (value => value.json())
          .then (json => handlersGetDiceResponse (json))
        document.body.className="";
    }

    async function callApiDiceDetail (paramId) {
        let status = 404;
        document.body.className="loading";

        await fetch(`https://lucky-dice-app.herokuapp.com/dices-detail-history/${paramId}`)
            .then(res => {
                status = res.status ;
                return res.json()
            })
            .then(result => {
                if (status != 200) {
                    alert (result.message);
                    $("#dice-result-field").hide()
                } else if (!result) {
                    alert ("Không tìm thấy kết quả với Id trên")
                    $("#dice-result-field").hide()
                } else {
                    $("#dice-result-field").show()
                    exportDataToField (result)
                }
            })
            .catch(err => {
                alert(err.message)
                $("#dice-result-field").hide();
            })

        document.body.className=""

        function exportDataToField(paramResult) {
            let voucherDetail = "Không có";
            let prizeDetail = "Không có";

            if (paramResult.voucher) {
                voucherDetail = `<ul><li>Mã voucher : ${paramResult.voucher.maVoucher}</li><li>Giảm giá : ${paramResult.voucher.phanTramGiamGia}%</li></ul>`
            }

            if (paramResult.prize) {
                prizeDetail = paramResult.prize.name
            }

            $("#dice-result-field [title=_id]").html(`&#9673; Id : ${paramResult._id}`)
            $("#dice-result-field [title=dice]").html(`&#9673; Kết quả quay : ${paramResult.dice} nút`)
            $("#dice-result-field [title=voucher]").html(`&#9673; Voucher : ${voucherDetail}`)
            $("#dice-result-field [title=prize]").html(`&#9673; Phần thưởng khác : ${prizeDetail}`)
        }    
    }

    function handlersGetDiceResponse (paramDiceRespond) {
        var vBonusPrizeObject = {
            "Ô tô" : ["image/car.jpg","Phần thưởng bonus của bạn là : Ô tô"],
            "Mũ" : ["image/mu.jpg","Phần thưởng bonus của bạn là : Mũ"],
            "Áo" : ["image/ao.jpg","Phần thưởng bonus của bạn là : Áo"],
            "Xe máy" : ["image/xe-may.jpg","Phần thưởng bonus của bạn là : Xe máy"],
            "null" : ["image/no-present.jpg","Hãy quay thêm để nhận được phần thưởng nhé"]
        }

        var vResponse = paramDiceRespond;
        console.log (vResponse);
        var vNumberResult = vResponse.dice;

        var vResultDetailObject = {
            win : function() {
                    $("#prize-result-casino-dice").append("Chúc mừng bạn. Đây là phần thưởng của bạn");
                    $("#voucher-prize-detail").html(`Mã voucher : ${vResponse.voucher.maVoucher}<br>`+
                                                    `Phần trăm giảm giá : ${vResponse.voucher.phanTramGiamGia}%`);
                    $("#voucher-prize-img").attr("src","image/voucher.png");
                },

            lose : function() {
                    $("#prize-result-casino-dice").append("Cảm ơn bạn. Hãy cố gắng lần sau");
                    $("#voucher-prize-detail").html(``);
                    $("#voucher-prize-img").attr("src","image/no-present.jpg");
                },
        }

        $("#img-result-casino-dice").attr("src",`image/${vNumberResult}.png`);
        $("#bonus-prize-detail-img").attr("src",vBonusPrizeObject[vResponse.prize][0]);
        $("#bonus-prize-detail-text").html(vBonusPrizeObject[vResponse.prize][1]);
        $("#prize-result-casino-dice").html(`<b> Id result </b> : ${vResponse.id} <br> <br> Bạn đã đổ ra ${vNumberResult} nút. `);

        vNumberResult > 3 ? vResultDetailObject.win() : vResultDetailObject.lose();
    }

    function exportDataToTable (paramDataType,paramResult) {
        DataTable.isDataTable('#table-history') ? $("#table-history").DataTable().clear().destroy() : "";
        $("#table-history").html("");

        var dataType = {
            dices : [
                {data : "id",title : "Id",filterType:"input"},
                {data : "dice",title : "Dice",filterType:"input"}
            ],
            prizes : [
                {data : "id",title : "Id",filterType:"input"},
                {data : "prize",title: "Giải thưởng",filterType:"input"}

            ],
            vouchers : [
                {data : "id",title : "Id",filterType:"input"},
                {data : "voucher.maVoucher",title : "Mã Voucher",filterType:"input"},
                {data : "voucher.phanTramGiamGia",title : "Phần trăm giảm giá",filterType:"input"},
            ]
        }

        var gUserTable = $("#table-history").DataTable({
            columns : dataType[paramDataType],
            scrollX : true,
            scrollY : "500px",
            scrollCollapse : true,
            lengthMenu : [[15, 20, 25, 50, 100, -1], [15, 20, 25, 50, 100, "All"]],
            columnDefs : [
                {"className": "dt-center", "targets": "_all"}
            ],
            initComplete : function () {
                var api = this.api();
                $(api.table().footer()).empty()
                $(api.table().header()).find("tr:eq(0)").clone().appendTo($(api.table().footer()));
                $(api.table().header()).find("tr:eq(0)").clone().appendTo($(api.table().header()));
                $(api.table().header()).find("tr:eq(1) th").each(function(bIndex){
                let bType = $(api.settings())[0].aoColumns[bIndex].filterType;
                $(this).removeClass("sorting sorting_asc sorting_desc");
                switch (bType) {
                    case "input" : {
                    $(this).html(`<input type="text" class="form-control form-control-sm text-center" style="font-family: 'FontAwesome', Helvetica Neue" placeholder="&#xf002; Tìm">`)
                            .on("keyup"," :input",function(){
                                api.column($(this).parent().index()).search(this.value.trim()).draw();
                            });
                    } 
                break;
                    case "select" : {
                    var bOptionData = $(api.settings())[0].aoColumns[bIndex].filterData;
                    var bOption = ``;
                    if(bOptionData) {for (let bValue of bOptionData) {
                        bOption += `<option value=${bValue[0]}>${bValue[1]}</option>\n`
                    }}
                    $(this).html(`<select class="form-control form-control-sm text-left" style="font-family: 'FontAwesome', Helvetica Neue"></select>`)
                            .on("change","select",function(){
                                var regex = this.value == "" ? "" : '^\\b' + this.value + '\\b$'
                                api.column($(this).parent().index()).search(regex,true,false).draw();
                            })
                            .find("select")
                            .append(`<option selected disabled hidden>&#xf0d7; Chọn</option>`)
                            .append($("<option/>",{html: "Tất cả", val : ""}))
                            .append(bOption)
                    };
                break;
                    default : {
                    $(this).html(``)
                    };
                }
                });

                $(window).on("resize",function(){
                    setTimeout(() => {api.columns.adjust()},500)
                })
            }
        })

        loadDataToTable(gUserTable,paramResult)
    }

function loadDataToTable (paramTable,paramData) {
    paramTable.clear();
    paramTable.rows.add(paramData);
    paramTable.draw();
}

function checkDataValid (paramElementCheck,paramAllElement,paramInputObj) {
  const vElementCheck = [...paramElementCheck];
  let vErrorDetail = {
    required : (value,title) => 
              !value ? `${title} chưa được điền hoặc chọn` : "",

    email : (value,title) => 
            !/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(value) ? 
            `${title} nhập vào không hợp lệ` : "",

    name : (value,title) => !/^[\p{L}\s]+[\p{L}]\s?$/u.test(value) ? 
    `${title} nhập vào không hợp lệ (Chỉ gồm chữ, không có số và ký tự đặc biệt)` : "",

    phone : (value,title) => !/^[0]{1}[35789]{1}[0-9]{8}$/.test(value) ? 
            `${title} nhập vào không hợp lệ` : "",

    min : (number,value,title) => value.length < number ? 
          `${title} phải có ít nhất ${number} ký tự` : "",

    max : (number,value,title) => value.length > number ? 
          `${title} chỉ có nhiều nhất ${number} ký tự` : "",

    username : (value,title) => !/^[a-z]{1}[a-z0-9]{5,14}$/.test(value) ? `${title} không hợp lệ` : "",

    password : (value,title) => !value ? `${title} không hợp lệ` : "",

    passwordrecheck : (value,recheckvalue,title) => value != recheckvalue ? 
                      `${title} và password phải trùng khớp nhau` : "", 

    // Updating
  };

  var vErrorCheck = "";

  paramElementCheck.forEach((value) => {
    let bIndex = paramAllElement.findIndexElementByNode(value);
    let bCheckType = paramAllElement.getAttributeValue(bIndex,"data-checktype");
    let bTitle = paramAllElement.getAttributeValue(bIndex,"title");
    let bValueCheck = value.value.trim();
    let bError = "";
    let bCheckTypeDetail = bCheckType.split("|");
    let bCheckIndex = 0;

    while (!bError && bCheckIndex < bCheckTypeDetail.length) {
      if (bCheckTypeDetail[bCheckIndex].includes(":") == true) {     
        var bTypeWithNumber = bCheckTypeDetail[bCheckIndex].split(":");
        bError = vErrorDetail[bTypeWithNumber[0]](bTypeWithNumber[1],bValueCheck,bTitle);
        vErrorCheck += bError ? bError + `\n` : "";
      } else {
          bError = vErrorDetail[bCheckTypeDetail[bCheckIndex]](bValueCheck,bTitle);
          vErrorCheck += bError ? bError + `\n` : "";
      }
      bCheckIndex ++ ;
    };
  });
  return vErrorCheck;
}

function dynamicCheckDataForm (paramElement,paramAllElement) {
  var vResult = "";
  paramElement.classList.remove("is-invalid");
  paramElement.classList.remove("is-valid")
    vResult = checkDataValid ([paramElement],paramAllElement)
    if (vResult) {
      paramElement.classList.add("is-invalid");
      $(paramElement).parent().children(".invalid-feedback").html(vResult);
      return;
    } 
  paramElement.classList.add("is-valid");
}

// Closure ứng dụng
function storeInputHTML () {
  // argument không phải là 1 Array mà chỉ look-like array nên phải dùng spread ES6 để chuyển lại thành array
  const vInputElement = [...arguments];
  const vAllAttributeElement = vInputElement.map((element) => {
    var bAllAttributeObj = {};
    element.getAttributeNames().forEach((attributeName) =>
      bAllAttributeObj[attributeName] = element.getAttribute(attributeName));
    return bAllAttributeObj;
  });
  const vTitleValueElement = vInputElement.map((element) => element.title);
  const vIdValueElement = vInputElement.map((element) => element.id);

  const vGetAttributeElement = {
    getAllElementJquery : () => $(vInputElement),
    getAllElement : () => vInputElement,
    getInput : (index) => vInputElement[index], 
    getAttributeValue : (index,attribute) => vAllAttributeElement[index][attribute],
    findIndexByAttributeExactValue : (attribute,value) => vAllAttributeElement.findIndex(allAttribute => allAttribute[attribute] == value),
    findIndexByAttributeContainValue : (attribute,value) => vAllAttributeElement.findIndex(allAttribute => allAttribute[attribute].includes(value) == true),
    findIndexElementByNode : (element) => vInputElement.findIndex((allElement) => allElement.isSameNode(element) == true)
  }

  return vGetAttributeElement;
}

</script>
</html>